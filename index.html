<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>羽球技能闖關任務（採用軟式網球設計原理）</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --ink: #263159;
      --primary: #FF8F52;
      --headline: #495579;
      --paper: #FFFDF7;
      --success: #16a34a;
      --danger: #ef4444;
      --accent: #8b5cf6;
    }
    body { background: var(--paper); color: var(--ink); }
    .card { background:#fff; border-radius: 1rem; box-shadow: 0 8px 24px rgba(0,0,0,.08); }
    .stamp-wrap { position: relative; }
    .stamp-svg {
      position:absolute; top:-10px; left:50%; transform:translateX(-50%) rotate(-8deg) scale(0.2);
      width:120px; height:120px; opacity:0; pointer-events:none;
      filter: drop-shadow(0 4px 6px rgba(0,0,0,.2));
    }
    .stamp-bounce { animation: stampIn .7s ease-out forwards; }
    @keyframes stampIn {
      0% { transform:translateX(-50%) rotate(-8deg) scale(0.2); opacity:0; }
      60% { transform:translateX(-50%) rotate(-6deg) scale(1.15); opacity:1; }
      100% { transform:translateX(-50%) rotate(-8deg) scale(1); opacity:1; }
    }
    .modal { position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; z-index:50; }
    .modal.show { display:flex; }
    .modal-card { width: min(960px, 92vw); background:#fff; border-radius:1rem; box-shadow:0 10px 30px rgba(0,0,0,.18); }
    .modal-header { display:flex; justify-content:space-between; align-items:center; padding:14px 18px; border-bottom:1px solid #eee; }
    .close-x { font-size:20px; font-weight:700; cursor:pointer; }
    .modal-body { padding:0; }
    .badge { display:inline-flex; align-items:center; gap:.5rem; padding:.4rem .75rem; border-radius:999px; font-weight:700; }
    .badge-silver { background:#eef2ff; border:2px solid #c7d2fe; }
    .badge-gold { background:#fff7e6; border:2px solid #facc15; }
    .badge-trophy { background:#fff1f2; border:2px solid #fb7185; }
    .trophy-wrap { position:fixed; left:50%; top:-40vh; transform:translateX(-50%); z-index:60; pointer-events:none; display:none; }
    .trophy-wrap.show { display:block; animation: dropIn 1s ease-out forwards, glow 2s ease-in-out 1s infinite alternate; }
    @keyframes dropIn { 0% { top:-40vh; } 80% { top:15vh; } 100% { top:18vh; } }
    @keyframes glow { from { filter: drop-shadow(0 0 0 rgba(250, 204, 21, .8)); } to { filter: drop-shadow(0 0 18px rgba(250, 204, 21, 1)); } }
    .btn { padding:.6rem 1rem; border-radius:.75rem; font-weight:700; }
    .btn-green { background:var(--success); color:#fff; }
    .btn-purple { background:var(--accent); color:#fff; }
    .btn-red { background:var(--danger); color:#fff; }
    .btn-ghost { background:#f3f4f6; }
    .teacher-badge { background:#ede9fe; color:#5b21b6; border:1px dashed #a78bfa; }
  </style>
</head>
<body class="min-h-screen">
  <div id="trophy" class="trophy-wrap" aria-hidden="true">...</div>
  <header class="text-center px-4 py-6">...</header>
  <section id="loginSection" class="max-w-xl card mx-auto p-6 my-6">...</section>
  <main id="app" class="container mx-auto px-4 pb-20 hidden">...</main>
  <div id="glossaryModal" class="modal" role="dialog" aria-modal="true">...</div>
  <div id="videoModal" class="modal" role="dialog" aria-modal="true">...</div>
  <div id="leaderboardModal" class="modal" role="dialog" aria-modal="true">...</div>

  <script>
    const TOTAL = 5;
    const PASSWORD = "888";
    let currentStudent = null;
    let teacherMode = false;

    const GLOSSARY = { ... };

    const CHALLENGES = [
      {title:'後場高遠球', goal:'將球高弧度送到對方後場。', method:'與搭檔站在底線，連續 5 次成功打到後場區域。', video:'https://www.youtube.com/embed/CJXAXS82m5M'},
      {title:'網前放球', goal:'控制輕柔過網與落點。', method:'在網前互相放小球，連續 5 次落在網前 1 公尺內。', video:'https://www.youtube.com/embed/dR-NXBW2m5c'},
      {title:'殺球練習', goal:'學習向下發力與擊球動作。', method:'搭檔拋球到頭頂上方，連續 3 次將球向下打入對面場地。', video:'https://www.youtube.com/embed/lZSFU_OpbCw'},
      {title:'基礎對打', goal:'建立回擊穩定度與協調性。', method:'以輕鬆力道來回對打，連續 10 次不落地。', video:'https://www.youtube.com/embed/mr1sB-2q8nU'},
      {title:'米字步法', goal:'熟悉全場八方向移動。', method:'由中心依序移動至八個方向並回中心，於 60 秒內完成一循環。', video:'https://www.youtube.com/embed/b0ZXWXMsVDM'}
    ];

    // ... 其他程式碼保持不變
  </script>
</body>
</html>
